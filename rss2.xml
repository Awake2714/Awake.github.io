<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Awake&#39;s Blog</title>
    <link>http://yoursite.com/</link>
    <atom:link href="/rss2.xml" rel="self" type="application/rss+xml"/>
    
    <description></description>
    <pubDate>Tue, 19 Nov 2019 06:04:10 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title>使用python发送邮件</title>
      <link>http://yoursite.com/2019/11/19/48_%E4%BD%BF%E7%94%A8python%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6/</link>
      <guid>http://yoursite.com/2019/11/19/48_%E4%BD%BF%E7%94%A8python%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6/</guid>
      <pubDate>Tue, 19 Nov 2019 05:56:03 GMT</pubDate>
      <description>
      
        &lt;p&gt;使用python向好友发送邮件&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>使用python向好友发送邮件<a id="more"></a><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> smtplib</span><br><span class="line"><span class="keyword">from</span> email.utils <span class="keyword">import</span> formataddr</span><br><span class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</span><br><span class="line"><span class="keyword">from</span> email.mime.image <span class="keyword">import</span> MIMEImage</span><br><span class="line"><span class="keyword">from</span> email.mime.multipart <span class="keyword">import</span> MIMEMultipart</span><br><span class="line"><span class="keyword">from</span> email.mime.application <span class="keyword">import</span> MIMEApplication</span><br><span class="line"></span><br><span class="line">sendFrom = <span class="string">'163428xxxx@qq.com'</span><span class="comment">#发件人邮箱</span></span><br><span class="line">sendTo = <span class="string">'241485xxxx@qq.com'</span><span class="comment">#收件人邮箱</span></span><br><span class="line">password = <span class="string">'xxxxxxxxxxxxxxx'</span><span class="comment">#授权码</span></span><br><span class="line">info = <span class="string">'你是傻逼吗？'</span><span class="comment">#邮件内容</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#################发送普通文本#####################</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sendtext</span><span class="params">(sendFrom, sendTo, password, info)</span>:</span></span><br><span class="line">msg = MIMEText(info, <span class="string">'plain'</span>, <span class="string">'utf-8'</span>)</span><br><span class="line">msg[<span class="string">'From'</span>] = formataddr([<span class="string">'Awake'</span>, sendFrom])<span class="comment">#发件人昵称和邮箱</span></span><br><span class="line">msg[<span class="string">'To'</span>] = formataddr([<span class="string">'晗泪'</span>, sendTo])<span class="comment">#收件人昵称和邮箱</span></span><br><span class="line">msg[<span class="string">'Subject'</span>] = <span class="string">'方敏大傻逼'</span><span class="comment">#邮件主题</span></span><br><span class="line">server = smtplib.SMTP_SSL(<span class="string">'smtp.qq.com'</span>, <span class="number">465</span>)<span class="comment">#连接</span></span><br><span class="line">server.login(sendFrom, password)<span class="comment">#登陆</span></span><br><span class="line">server.sendmail(sendFrom, sendTo, msg.as_string())<span class="comment">#发送邮件</span></span><br><span class="line">server.quit()</span><br><span class="line"></span><br><span class="line"><span class="comment"># sendtext(sendFrom, sendTo, password, info)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#################发送html#####################</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sendhtml</span><span class="params">(sendFrom, sendTo, password, info)</span>:</span></span><br><span class="line">msg = <span class="string">'''</span></span><br><span class="line"><span class="string">&lt;html&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">&lt;h3&gt;&#123;&#125;&lt;/h3&gt;</span></span><br><span class="line"><span class="string">但是</span></span><br><span class="line"><span class="string">&lt;h3&gt;爸爸爱你&lt;/h3&gt;</span></span><br><span class="line"><span class="string">哈哈哈哈哈哈</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br><span class="line"><span class="string">'''</span>.format(info)</span><br><span class="line">msg = MIMEText(msg, <span class="string">'html'</span>, <span class="string">'utf-8'</span>)</span><br><span class="line">smtp = smtplib.SMTP_SSL()</span><br><span class="line">smtp.connect(<span class="string">'smtp.qq.com'</span>)</span><br><span class="line">smtp.login(sendFrom, password)</span><br><span class="line">smtp.sendmail(sendFrom, sendTo, msg.as_string())</span><br><span class="line">smtp.quit()</span><br><span class="line"></span><br><span class="line"><span class="comment"># sendhtml(sendFrom, sendTo, password, info)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#################发送图片#####################</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sendimage</span><span class="params">(sendFrom, sendTo, password, info)</span>:</span></span><br><span class="line">text = MIMEText(info)</span><br><span class="line">image = open(<span class="string">'./FM.jpg'</span>, <span class="string">'rb'</span>).read()</span><br><span class="line">image = MIMEImage(image)</span><br><span class="line">image.add_header(<span class="string">'Content-ID'</span>,<span class="string">'&lt;image1&gt;'</span>)</span><br><span class="line">msg = MIMEMultipart(<span class="string">'mixed'</span>)</span><br><span class="line">msg.attach(text)<span class="comment">#将MIMEText对象或MIMEImage对象添加到MIMEMultipart对象中</span></span><br><span class="line">msg.attach(image)</span><br><span class="line">smtp = smtplib.SMTP_SSL()</span><br><span class="line">smtp.connect(<span class="string">'smtp.qq.com'</span>)</span><br><span class="line">smtp.login(sendFrom, password)</span><br><span class="line">smtp.sendmail(sendFrom, sendTo, msg.as_string())</span><br><span class="line">smtp.quit()</span><br><span class="line"></span><br><span class="line"><span class="comment"># sendimage(sendFrom, sendTo, password, info)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#################发送附件#####################</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sendfile</span><span class="params">(sendFrom, sendTo, password, info)</span>:</span></span><br><span class="line">file = open(<span class="string">'./fm.txt'</span>, <span class="string">'rb'</span>).read()</span><br><span class="line">text = MIMEText(file, <span class="string">'base64'</span>, <span class="string">'utf-8'</span>)</span><br><span class="line">text[<span class="string">"Content-Type"</span>] = <span class="string">'application/octet-stream'</span></span><br><span class="line">text[<span class="string">"Content-Disposition"</span>] = <span class="string">'attachment; filename="fm.txt"'</span></span><br><span class="line">msg = MIMEMultipart(<span class="string">'mixed'</span>)</span><br><span class="line">msg[<span class="string">'Subject'</span>] = info</span><br><span class="line">msg[<span class="string">'To'</span>] = formataddr([<span class="string">'晗泪'</span>, sendTo])</span><br><span class="line">msg.attach(text)</span><br><span class="line">smtp = smtplib.SMTP_SSL()</span><br><span class="line">smtp.connect(<span class="string">'smtp.qq.com'</span>)</span><br><span class="line">smtp.login(sendFrom, password)</span><br><span class="line">smtp.sendmail(sendFrom, sendTo, msg.as_string())</span><br><span class="line">smtp.quit()</span><br><span class="line"></span><br><span class="line"><span class="comment"># sendfile(sendFrom, sendTo, password, info)</span></span><br></pre></td></tr></table></figure></p>]]></content:encoded>
      
      <comments>http://yoursite.com/2019/11/19/48_%E4%BD%BF%E7%94%A8python%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6/#disqus_thread</comments>
    </item>
    
    <item>
      <title>datetime模块学习</title>
      <link>http://yoursite.com/2019/10/28/47_datetime%E6%A8%A1%E5%9D%97/</link>
      <guid>http://yoursite.com/2019/10/28/47_datetime%E6%A8%A1%E5%9D%97/</guid>
      <pubDate>Mon, 28 Oct 2019 09:14:03 GMT</pubDate>
      <description>
      
        &lt;p&gt;datetime模块学习&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>datetime模块学习<a id="more"></a><br>date<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> date</span><br><span class="line">date.max</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>datetime.date(<span class="number">9999</span>, <span class="number">12</span>, <span class="number">31</span>)</span><br><span class="line">date.min</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>datetime.date(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">date.resolution</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>datetime.timedelta(<span class="number">1</span>)</span><br><span class="line">date.today()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>datetime.date(<span class="number">2019</span>, <span class="number">10</span>, <span class="number">28</span>)</span><br><span class="line">date.today().year</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2019</span></span><br><span class="line">date.today().month</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">10</span></span><br><span class="line">date.today().day</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">28</span></span><br><span class="line">d = date.today()</span><br><span class="line">d.replace(<span class="number">2018</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>datetime.date(<span class="number">2018</span>, <span class="number">10</span>, <span class="number">28</span>)</span><br><span class="line">d.replace(<span class="number">11</span>,<span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>datetime.date(<span class="number">11</span>, <span class="number">1</span>, <span class="number">28</span>)</span><br><span class="line">d.timetuple()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>time.struct_time(tm_year=<span class="number">2019</span>, tm_mon=<span class="number">10</span>, tm_mday=<span class="number">28</span>, tm_hour=<span class="number">0</span>, tm_min=<span class="number">0</span>, tm_sec=<span class="number">0</span>, tm_wday=<span class="number">0</span>, tm_yday=<span class="number">301</span>, tm_isdst=<span class="number">-1</span>)</span><br><span class="line">d.toordinal()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">737360</span></span><br><span class="line">d.weekday()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0</span></span><br><span class="line">d.isoweekday()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1</span></span><br><span class="line">d.isocalendar()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="number">2019</span>, <span class="number">44</span>, <span class="number">1</span>)</span><br><span class="line">d.isoformat()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'2019-10-28'</span></span><br><span class="line">d.ctime()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'Mon Oct 28 00:00:00 2019'</span></span><br><span class="line">d.strftime(<span class="string">'%d/%m/%Y'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'28/10/2019'</span></span><br></pre></td></tr></table></figure></p><p>time<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> time</span><br><span class="line">time.max</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>datetime.time(<span class="number">23</span>, <span class="number">59</span>, <span class="number">59</span>, <span class="number">999999</span>)</span><br><span class="line">time.min</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>datetime.time(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">time.resolution</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>datetime.timedelta(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">t = time(<span class="number">15</span>,<span class="number">7</span>,<span class="number">18</span>)</span><br><span class="line">t</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>datetime.time(<span class="number">15</span>, <span class="number">7</span>, <span class="number">18</span>)</span><br><span class="line">t.hour</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">15</span></span><br><span class="line">t.minute</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">7</span></span><br><span class="line">t.second</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">18</span></span><br><span class="line">t.microsecond</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0</span></span><br><span class="line">t.tzinfo</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span></span><br><span class="line">t.replace(<span class="number">18</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>datetime.time(<span class="number">18</span>, <span class="number">7</span>, <span class="number">18</span>)</span><br><span class="line">t.isoformat()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'15:07:18'</span></span><br><span class="line">t.strftime(<span class="string">'%H-%M-%S'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'15-07-18'</span></span><br><span class="line">t = time(<span class="number">17</span>,<span class="number">29</span>,<span class="number">59</span>,<span class="number">131</span>)</span><br><span class="line">t</span><br><span class="line">datetime.time(<span class="number">17</span>, <span class="number">29</span>, <span class="number">59</span>, <span class="number">131</span>)</span><br><span class="line">t.strftime(<span class="string">'%H-%M-%S.%f'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'17-29-59.000131'</span></span><br></pre></td></tr></table></figure></p><p>datetime<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime, timezone</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>datetime.today()</span><br><span class="line">datetime.datetime(<span class="number">2017</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">20</span>, <span class="number">44</span>, <span class="number">40</span>, <span class="number">556318</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>datetime.now()</span><br><span class="line">datetime.datetime(<span class="number">2017</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">20</span>, <span class="number">44</span>, <span class="number">56</span>, <span class="number">572615</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>datetime.now(timezone.utc)</span><br><span class="line">datetime.datetime(<span class="number">2017</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">12</span>, <span class="number">45</span>, <span class="number">22</span>, <span class="number">881694</span>, tzinfo=datetime.timezone.utc)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>datetime.utcnow()</span><br><span class="line">datetime.datetime(<span class="number">2017</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">12</span>, <span class="number">45</span>, <span class="number">52</span>, <span class="number">812508</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> time</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>datetime.fromtimestamp(time.time())</span><br><span class="line">datetime.datetime(<span class="number">2017</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">20</span>, <span class="number">46</span>, <span class="number">41</span>, <span class="number">97578</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>datetime.utcfromtimestamp(time.time())</span><br><span class="line">datetime.datetime(<span class="number">2017</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">12</span>, <span class="number">46</span>, <span class="number">56</span>, <span class="number">989413</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>datetime.combine(date(<span class="number">2017</span>, <span class="number">2</span>, <span class="number">4</span>), t)</span><br><span class="line">datetime.datetime(<span class="number">2017</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">20</span>, <span class="number">5</span>, <span class="number">40</span>, <span class="number">8888</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>datetime.strptime(<span class="string">'2017/02/04 20:49'</span>, <span class="string">'%Y/%m/%d %H:%M'</span>)</span><br><span class="line">datetime.datetime(<span class="number">2017</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">20</span>, <span class="number">49</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt = datetime.now()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt</span><br><span class="line">datetime.datetime(<span class="number">2017</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">20</span>, <span class="number">57</span>, <span class="number">0</span>, <span class="number">621378</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt.year</span><br><span class="line"><span class="number">2017</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt.month</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt.day</span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt.hour</span><br><span class="line"><span class="number">20</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt.minute</span><br><span class="line"><span class="number">57</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt.second</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt.microsecond</span><br><span class="line"><span class="number">621378</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt.tzinfo</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt.timestamp()</span><br><span class="line"><span class="number">1486213020.621378</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt.date()</span><br><span class="line">datetime.date(<span class="number">2017</span>, <span class="number">2</span>, <span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt.time()</span><br><span class="line">datetime.time(<span class="number">20</span>, <span class="number">57</span>, <span class="number">0</span>, <span class="number">621378</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt.timetz()</span><br><span class="line">datetime.time(<span class="number">20</span>, <span class="number">57</span>, <span class="number">0</span>, <span class="number">621378</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt.replace()</span><br><span class="line">datetime.datetime(<span class="number">2017</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">20</span>, <span class="number">57</span>, <span class="number">0</span>, <span class="number">621378</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt.replace(<span class="number">2016</span>)</span><br><span class="line">datetime.datetime(<span class="number">2016</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">20</span>, <span class="number">57</span>, <span class="number">0</span>, <span class="number">621378</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt.timetuple()</span><br><span class="line">time.struct_time(tm_year=<span class="number">2017</span>, tm_mon=<span class="number">2</span>, tm_mday=<span class="number">4</span>, tm_hour=<span class="number">20</span>, tm_min=<span class="number">57</span>, tm_sec=<span class="number">0</span>, tm_wday=<span class="number">5</span>, tm_yday=<span class="number">35</span>, tm_isdst=<span class="number">-1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt.utctimetuple()</span><br><span class="line">time.struct_time(tm_year=<span class="number">2017</span>, tm_mon=<span class="number">2</span>, tm_mday=<span class="number">4</span>, tm_hour=<span class="number">20</span>, tm_min=<span class="number">57</span>, tm_sec=<span class="number">0</span>, tm_wday=<span class="number">5</span>, tm_yday=<span class="number">35</span>, tm_isdst=<span class="number">0</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt.toordinal()</span><br><span class="line"><span class="number">736364</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt.weekday()</span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt.isocalendar()</span><br><span class="line">(<span class="number">2017</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt.isoformat()</span><br><span class="line"><span class="string">'2017-02-04T20:57:00.621378'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt.isoformat(sep=<span class="string">'/'</span>)</span><br><span class="line"><span class="string">'2017-02-04/20:57:00.621378'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt.isoformat(sep=<span class="string">' '</span>)</span><br><span class="line"><span class="string">'2017-02-04 20:57:00.621378'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt.ctime()</span><br><span class="line"><span class="string">'Sat Feb 4 20:57:00 2017'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt.strftime(<span class="string">'%Y%m%d %H:%M:%S.%f'</span>)</span><br><span class="line"><span class="string">'20170204 20:57:00.621378'</span></span><br></pre></td></tr></table></figure></p><p>timedelta</p><blockquote><p>timedelta(days=0, seconds=0, microseconds=0, milliseconds=0, hours=0, weeks=0)<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> datetime</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>datetime.timedelta(<span class="number">365</span>).total_seconds() <span class="comment"># 一年包含的总秒数</span></span><br><span class="line"><span class="number">31536000.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt = datetime.datetime.now()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt + datetime.timedelta(<span class="number">3</span>) <span class="comment"># 3天后</span></span><br><span class="line">datetime.datetime(<span class="number">2017</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">39</span>, <span class="number">40</span>, <span class="number">102821</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt + datetime.timedelta(<span class="number">-3</span>) <span class="comment"># 3天前</span></span><br><span class="line">datetime.datetime(<span class="number">2017</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">9</span>, <span class="number">39</span>, <span class="number">40</span>, <span class="number">102821</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt + datetime.timedelta(hours=<span class="number">3</span>) <span class="comment"># 3小时后</span></span><br><span class="line">datetime.datetime(<span class="number">2017</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">12</span>, <span class="number">39</span>, <span class="number">40</span>, <span class="number">102821</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt + datetime.timedelta(hours=<span class="number">-3</span>) <span class="comment"># 3小时前</span></span><br><span class="line">datetime.datetime(<span class="number">2017</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">39</span>, <span class="number">40</span>, <span class="number">102821</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt + datetime.timedelta(hours=<span class="number">3</span>, seconds=<span class="number">30</span>) <span class="comment"># 3小时30秒后</span></span><br><span class="line">datetime.datetime(<span class="number">2017</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">12</span>, <span class="number">40</span>, <span class="number">10</span>, <span class="number">102821</span>)</span><br></pre></td></tr></table></figure></p></blockquote>]]></content:encoded>
      
      <comments>http://yoursite.com/2019/10/28/47_datetime%E6%A8%A1%E5%9D%97/#disqus_thread</comments>
    </item>
    
    <item>
      <title>time模块学习</title>
      <link>http://yoursite.com/2019/10/28/46_time%E6%A8%A1%E5%9D%97/</link>
      <guid>http://yoursite.com/2019/10/28/46_time%E6%A8%A1%E5%9D%97/</guid>
      <pubDate>Mon, 28 Oct 2019 08:27:03 GMT</pubDate>
      <description>
      
        &lt;p&gt;time.time()：返回当前时间的时间戳&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>time.time()：返回当前时间的时间戳<a id="more"></a><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">time.time()</span><br><span class="line"><span class="number">1572248254.9169276</span></span><br></pre></td></tr></table></figure></p><p>time.localtime([secs])：将一个时间戳转换为当前时区的struct_time。secs参数未提供，则以当前时间为准<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">time.localtime()</span><br><span class="line">time.struct_time(tm_year=<span class="number">2019</span>, tm_mon=<span class="number">10</span>, tm_mday=<span class="number">28</span>, tm_hour=<span class="number">15</span>, tm_min=<span class="number">37</span>, tm_sec=<span class="number">49</span>, tm_wday=<span class="number">0</span>, tm_yday=<span class="number">301</span>, tm_isdst=<span class="number">0</span>)</span><br><span class="line">time.localtime(time.time())</span><br><span class="line">time.struct_time(tm_year=<span class="number">2019</span>, tm_mon=<span class="number">10</span>, tm_mday=<span class="number">28</span>, tm_hour=<span class="number">15</span>, tm_min=<span class="number">39</span>, tm_sec=<span class="number">20</span>, tm_wday=<span class="number">0</span>, tm_yday=<span class="number">301</span>, tm_isdst=<span class="number">0</span>)</span><br></pre></td></tr></table></figure></p><p>time.gmtime([secs])：和localtime()方法类似，gmtime()方法是将一个时间戳转换为UTC时区（0时区）的struct_time。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">time.gmtime()</span><br><span class="line">time.struct_time(tm_year=<span class="number">2019</span>, tm_mon=<span class="number">10</span>, tm_mday=<span class="number">28</span>, tm_hour=<span class="number">7</span>, tm_min=<span class="number">40</span>, tm_sec=<span class="number">4</span>, tm_wday=<span class="number">0</span>, tm_yday=<span class="number">301</span>, tm_isdst=<span class="number">0</span>)</span><br></pre></td></tr></table></figure></p><p>time.mktime(t)：将一个struct_time转化为时间戳。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">time.mktime(time.localtime())</span><br><span class="line"><span class="number">1572248465.0</span></span><br></pre></td></tr></table></figure></p><p>time.asctime([t])：把一个表示时间的元组或者struct_time表示为这种形式：’Sun Jun 20 23:21:05 1993’。如果没有参数，将会将time.localtime()作为参数传入。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">time.asctime()</span><br><span class="line"><span class="string">'Mon Oct 28 15:42:41 2019'</span></span><br></pre></td></tr></table></figure></p><p>time.ctime([secs])：把一个时间戳（按秒计算的浮点数）转化为time.asctime()的形式。如果参数未给或者为None的时候，将会默认time.time()为参数。它的作用相当于time.asctime(time.localtime(secs))。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">time.ctime()</span><br><span class="line"><span class="string">'Mon Oct 28 15:44:59 2019'</span></span><br><span class="line">time.ctime(time.time())</span><br><span class="line"><span class="string">'Mon Oct 28 15:45:39 2019'</span></span><br><span class="line">time.asctime(time.localtime())</span><br><span class="line"><span class="string">'Mon Oct 28 15:45:49 2019'</span></span><br></pre></td></tr></table></figure></p><p>time.strftime(format[, t])：把一个代表时间的元组或者struct_time（如由time.localtime()和time.gmtime()返回）转化为格式化的时间字符串。如果t未指定，将传入time.localtime()。如果元组中任何一个元素越界，ValueError的错误将会被抛出<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">time.strftime(<span class="string">'%Y-%m-%dT%H:%M:%S'</span>, time.localtime())</span><br><span class="line"><span class="string">'2019-10-28T15:48:07'</span></span><br></pre></td></tr></table></figure></p><p>time.strptime(string[, format])：把一个格式化时间字符串转化为struct_time。实际上它和strftime()是逆操作。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">time.strptime(<span class="string">'2019-10-28 13:56:23'</span>, <span class="string">'%Y-%m-%d %H:%M:%S'</span>)</span><br><span class="line">time.struct_time(tm_year=<span class="number">2019</span>, tm_mon=<span class="number">10</span>, tm_mday=<span class="number">28</span>, tm_hour=<span class="number">13</span>, tm_min=<span class="number">56</span>, tm_sec=<span class="number">23</span>, tm_wday=<span class="number">0</span>, tm_yday=<span class="number">301</span>, tm_isdst=<span class="number">-1</span>)</span><br></pre></td></tr></table></figure></p>]]></content:encoded>
      
      <comments>http://yoursite.com/2019/10/28/46_time%E6%A8%A1%E5%9D%97/#disqus_thread</comments>
    </item>
    
    <item>
      <title>时间转化</title>
      <link>http://yoursite.com/2019/10/27/45_%E6%97%B6%E9%97%B4%E8%BD%AC%E5%8C%96/</link>
      <guid>http://yoursite.com/2019/10/27/45_%E6%97%B6%E9%97%B4%E8%BD%AC%E5%8C%96/</guid>
      <pubDate>Sun, 27 Oct 2019 08:03:27 GMT</pubDate>
      <description>
      
        &lt;p&gt;上周，公司居然又叫我们上手写代码了。但是那个网站有好多时间规则，我也搞不清楚，百度了好久才找到答案，最后发现自己真的是太辣鸡了。所以，也不用纠结是走还是留了，还是留在公司好好学习吧。坚定一个方向——爬虫，能把这个搞好都不错了，这么说来，Django好像也是白学了这么久呢，还不如好好学爬虫呢。&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>上周，公司居然又叫我们上手写代码了。但是那个网站有好多时间规则，我也搞不清楚，百度了好久才找到答案，最后发现自己真的是太辣鸡了。所以，也不用纠结是走还是留了，还是留在公司好好学习吧。坚定一个方向——爬虫，能把这个搞好都不错了，这么说来，Django好像也是白学了这么久呢，还不如好好学爬虫呢。<a id="more"></a><br>那个网站的时间是这样的：25分钟，5小时前，3天前，2周前，1个月前，1年前…<br>一开始我使用的是time模块，是这样去匹配的：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">conv_time1</span><span class="params">(t)</span>:</span></span><br><span class="line">    d = re.findall(<span class="string">'\d+'</span>, t)[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">if</span> <span class="string">u'分钟'</span> <span class="keyword">in</span> t:</span><br><span class="line">        c = time.time() - int(d) * <span class="number">60</span></span><br><span class="line">    <span class="keyword">elif</span> <span class="string">u'小时'</span> <span class="keyword">in</span> t:</span><br><span class="line">        c = time.time() - int(d)*<span class="number">60</span>*<span class="number">60</span></span><br><span class="line">    <span class="keyword">elif</span> <span class="string">u'天'</span> <span class="keyword">in</span> t:</span><br><span class="line">        c = time.time() - int(d)*<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span></span><br><span class="line">    <span class="keyword">elif</span> <span class="string">u'周'</span> <span class="keyword">in</span> t:</span><br><span class="line">        c = time.time() - int(d)*<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>*<span class="number">7</span></span><br><span class="line">    c = time.strftime(<span class="string">'%Y-%m-%d %H:%M:%S'</span>, time.localtime(c))</span><br><span class="line">    <span class="keyword">return</span> c</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(<span class="string">'当前时间为：'</span>,datetime.now())</span><br><span class="line">r1 = conv_time1(<span class="string">'25分钟前'</span>)</span><br><span class="line">r2 = conv_time1(<span class="string">'5小时前'</span>)</span><br><span class="line">r3 = conv_time1(<span class="string">'3天前'</span>)</span><br><span class="line">r4 = conv_time1(<span class="string">'2周前'</span>)</span><br><span class="line">print(<span class="string">'25分钟前：'</span>, r1)</span><br><span class="line">print(<span class="string">'5小时前：'</span>, r2)</span><br><span class="line">print(<span class="string">'3天前：'</span>, r3)</span><br><span class="line">print(<span class="string">'2周前：'</span>, r4)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出如下：</span></span><br><span class="line">当前时间为： <span class="number">2019</span><span class="number">-10</span><span class="number">-27</span> <span class="number">16</span>:<span class="number">21</span>:<span class="number">55.296976</span></span><br><span class="line"><span class="number">25</span>分钟前： <span class="number">2019</span><span class="number">-10</span><span class="number">-27</span> <span class="number">15</span>:<span class="number">56</span>:<span class="number">55</span></span><br><span class="line"><span class="number">5</span>小时前： <span class="number">2019</span><span class="number">-10</span><span class="number">-27</span> <span class="number">11</span>:<span class="number">21</span>:<span class="number">55</span></span><br><span class="line"><span class="number">3</span>天前： <span class="number">2019</span><span class="number">-10</span><span class="number">-24</span> <span class="number">16</span>:<span class="number">21</span>:<span class="number">55</span></span><br><span class="line"><span class="number">2</span>周前： <span class="number">2019</span><span class="number">-10</span><span class="number">-13</span> <span class="number">16</span>:<span class="number">21</span>:<span class="number">55</span></span><br></pre></td></tr></table></figure></p><p>这样做还是没有问题的，可是当时间变成了1个月前，那到底一个月是30天还是31天呢，这样输出的时间就有问题<br>后来又遇到了datetime模块，又将代码变成了如下：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">conv_time2</span><span class="params">(t)</span>:</span></span><br><span class="line">    d = int(re.findall(<span class="string">'\d+'</span>, t)[<span class="number">0</span>])</span><br><span class="line">    <span class="keyword">if</span> <span class="string">u'分钟'</span> <span class="keyword">in</span> t:</span><br><span class="line">        s = datetime.now() - timedelta(minutes=d)</span><br><span class="line">    <span class="keyword">elif</span> <span class="string">u'小时'</span> <span class="keyword">in</span> t:</span><br><span class="line">        s = datetime.now() - timedelta(hours=d)</span><br><span class="line">    <span class="keyword">elif</span> <span class="string">u'天'</span> <span class="keyword">in</span> t:</span><br><span class="line">        s = datetime.now() - timedelta(days=d)</span><br><span class="line">    <span class="keyword">elif</span> <span class="string">u'周'</span> <span class="keyword">in</span> t:</span><br><span class="line">        s = datetime.now() - timedelta(days=d*<span class="number">7</span>)</span><br><span class="line">    <span class="keyword">elif</span> <span class="string">u'月'</span> <span class="keyword">in</span> t:</span><br><span class="line">        s = datetime.now() - timedelta(days=d*<span class="number">30</span>)</span><br><span class="line">    <span class="keyword">elif</span> <span class="string">u'年'</span> <span class="keyword">in</span> t:</span><br><span class="line">        s = datetime.now() - timedelta(days=d*<span class="number">365</span>)</span><br><span class="line">    <span class="keyword">return</span> s.strftime(<span class="string">'%Y-%m-%d %H:%M:%S'</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">'当前时间为：'</span>,datetime.now())</span><br><span class="line">r1 = conv_time2(<span class="string">'25分钟前'</span>)</span><br><span class="line">r2 = conv_time2(<span class="string">'5小时前'</span>)</span><br><span class="line">r3 = conv_time2(<span class="string">'3天前'</span>)</span><br><span class="line">r4 = conv_time2(<span class="string">'2周前'</span>)</span><br><span class="line">r5 = conv_time2(<span class="string">'1个月前'</span>)</span><br><span class="line">r6 = conv_time2(<span class="string">'1年前'</span>)</span><br><span class="line">print(<span class="string">'25分钟前：'</span>, r1)</span><br><span class="line">print(<span class="string">'5小时前：'</span>, r2)</span><br><span class="line">print(<span class="string">'3天前：'</span>, r3)</span><br><span class="line">print(<span class="string">'2周前：'</span>, r4)</span><br><span class="line">print(<span class="string">'1个月前：'</span>, r5)</span><br><span class="line">print(<span class="string">'1年前：'</span>, r6)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 輸出如下</span></span><br><span class="line">当前时间为： <span class="number">2019</span><span class="number">-10</span><span class="number">-27</span> <span class="number">16</span>:<span class="number">30</span>:<span class="number">01.563789</span></span><br><span class="line"><span class="number">25</span>分钟前： <span class="number">2019</span><span class="number">-10</span><span class="number">-27</span> <span class="number">16</span>:<span class="number">05</span>:<span class="number">01</span></span><br><span class="line"><span class="number">5</span>小时前： <span class="number">2019</span><span class="number">-10</span><span class="number">-27</span> <span class="number">11</span>:<span class="number">30</span>:<span class="number">01</span></span><br><span class="line"><span class="number">3</span>天前： <span class="number">2019</span><span class="number">-10</span><span class="number">-24</span> <span class="number">16</span>:<span class="number">30</span>:<span class="number">01</span></span><br><span class="line"><span class="number">2</span>周前： <span class="number">2019</span><span class="number">-10</span><span class="number">-13</span> <span class="number">16</span>:<span class="number">30</span>:<span class="number">01</span></span><br><span class="line"><span class="number">1</span>个月前： <span class="number">2019</span><span class="number">-09</span><span class="number">-27</span> <span class="number">16</span>:<span class="number">30</span>:<span class="number">01</span></span><br><span class="line"><span class="number">1</span>年前： <span class="number">2018</span><span class="number">-10</span><span class="number">-27</span> <span class="number">16</span>:<span class="number">30</span>:<span class="number">01</span></span><br></pre></td></tr></table></figure></p><p>但是当时间变成2个月前：输出就是这样了：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">'当前时间为：'</span>,datetime.now())</span><br><span class="line">r5 = conv_time2(<span class="string">'2个月前'</span>)</span><br><span class="line">print(<span class="string">'2个月前：'</span>, r5)</span><br><span class="line"><span class="number">2</span>个月前： <span class="number">2019</span><span class="number">-08</span><span class="number">-28</span> <span class="number">16</span>:<span class="number">33</span>:<span class="number">37</span></span><br></pre></td></tr></table></figure><p>这明显是不符合要求的，后来在我呕心沥血，刨根问底之下，终于找到了一篇博客，下面就是完整的时间匹配啦：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> dateutil.relativedelta <span class="keyword">import</span> relativedelta</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">conv_time3</span><span class="params">(t)</span>:</span></span><br><span class="line">    d = int(re.findall(<span class="string">'\d+'</span>, t)[<span class="number">0</span>])</span><br><span class="line">    <span class="keyword">if</span> <span class="string">u'分钟'</span> <span class="keyword">in</span> t:</span><br><span class="line">        s = datetime.now() - relativedelta(minutes=d)</span><br><span class="line">    <span class="keyword">elif</span> <span class="string">u'小时'</span> <span class="keyword">in</span> t:</span><br><span class="line">        s = datetime.now() - relativedelta(hours=d)</span><br><span class="line">    <span class="keyword">elif</span> <span class="string">u'天'</span> <span class="keyword">in</span> t:</span><br><span class="line">        s = datetime.now() - relativedelta(days=d)</span><br><span class="line">    <span class="keyword">elif</span> <span class="string">u'周'</span> <span class="keyword">in</span> t:</span><br><span class="line">        s = datetime.now() - relativedelta(weeks=d)</span><br><span class="line">    <span class="keyword">elif</span> <span class="string">u'月'</span> <span class="keyword">in</span> t:</span><br><span class="line">        s = datetime.now() - relativedelta(months=d)</span><br><span class="line">    <span class="keyword">elif</span> <span class="string">u'年'</span> <span class="keyword">in</span> t:</span><br><span class="line">        s = datetime.now() - relativedelta(years=d)</span><br><span class="line">    <span class="keyword">return</span> s.strftime(<span class="string">'%Y-%m-%d %H:%M:%S'</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">'当前时间为：'</span>,datetime.now())</span><br><span class="line">r1 = conv_time3(<span class="string">'25分钟前'</span>)</span><br><span class="line">r2 = conv_time3(<span class="string">'5小时前'</span>)</span><br><span class="line">r3 = conv_time3(<span class="string">'3天前'</span>)</span><br><span class="line">r4 = conv_time3(<span class="string">'2周前'</span>)</span><br><span class="line">r5 = conv_time3(<span class="string">'2个月前'</span>)</span><br><span class="line">r6 = conv_time3(<span class="string">'3年前'</span>)</span><br><span class="line">print(<span class="string">'25分钟前：'</span>, r1)</span><br><span class="line">print(<span class="string">'5小时前：'</span>, r2)</span><br><span class="line">print(<span class="string">'3天前：'</span>, r3)</span><br><span class="line">print(<span class="string">'2周前：'</span>, r4)</span><br><span class="line">print(<span class="string">'2个月前：'</span>, r5)</span><br><span class="line">print(<span class="string">'2年前：'</span>, r6)</span><br><span class="line"></span><br><span class="line">当前时间为： <span class="number">2019</span><span class="number">-10</span><span class="number">-27</span> <span class="number">16</span>:<span class="number">39</span>:<span class="number">52.254574</span></span><br><span class="line"><span class="number">25</span>分钟前： <span class="number">2019</span><span class="number">-10</span><span class="number">-27</span> <span class="number">16</span>:<span class="number">14</span>:<span class="number">52</span></span><br><span class="line"><span class="number">5</span>小时前： <span class="number">2019</span><span class="number">-10</span><span class="number">-27</span> <span class="number">11</span>:<span class="number">39</span>:<span class="number">52</span></span><br><span class="line"><span class="number">3</span>天前： <span class="number">2019</span><span class="number">-10</span><span class="number">-24</span> <span class="number">16</span>:<span class="number">39</span>:<span class="number">52</span></span><br><span class="line"><span class="number">2</span>周前： <span class="number">2019</span><span class="number">-10</span><span class="number">-13</span> <span class="number">16</span>:<span class="number">39</span>:<span class="number">52</span></span><br><span class="line"><span class="number">2</span>个月前： <span class="number">2019</span><span class="number">-08</span><span class="number">-27</span> <span class="number">16</span>:<span class="number">39</span>:<span class="number">52</span></span><br><span class="line"><span class="number">2</span>年前： <span class="number">2016</span><span class="number">-10</span><span class="number">-27</span> <span class="number">16</span>:<span class="number">39</span>:<span class="number">52</span></span><br></pre></td></tr></table></figure></p><p>这下输出就是完全正确的了<br>然后，我还看到了有更惊为天人的写法<br>如果要计算5个月前的时间</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">a = datetime.now()</span><br><span class="line">print(<span class="string">'当前时间为：'</span>, a)</span><br><span class="line">m = datetime(a.year,a.month<span class="number">-5</span>,a.day,a.hour,a.minute,a.second,a.microsecond).strftime(<span class="string">'%Y-%m-%d %H:%M:%S'</span>)</span><br><span class="line">print(<span class="string">'5个月前：'</span> , m)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">当前时间为： <span class="number">2019</span><span class="number">-10</span><span class="number">-27</span> <span class="number">16</span>:<span class="number">44</span>:<span class="number">02.818906</span></span><br><span class="line"><span class="number">5</span>个月前： <span class="number">2019</span><span class="number">-05</span><span class="number">-27</span> <span class="number">16</span>:<span class="number">44</span>:<span class="number">02</span></span><br></pre></td></tr></table></figure><p>跪了跪了，真的太厉害了，看来，我还真的只是个辣鸡弟弟啊<br>接下来的任务就是先好好学学datetime模块的相关用法吧，我太弱了</p>]]></content:encoded>
      
      <comments>http://yoursite.com/2019/10/27/45_%E6%97%B6%E9%97%B4%E8%BD%AC%E5%8C%96/#disqus_thread</comments>
    </item>
    
    <item>
      <title>小舒的纠结</title>
      <link>http://yoursite.com/2019/10/19/44_%E5%B0%8F%E8%88%92%E7%9A%84%E7%BA%A0%E7%BB%93/</link>
      <guid>http://yoursite.com/2019/10/19/44_%E5%B0%8F%E8%88%92%E7%9A%84%E7%BA%A0%E7%BB%93/</guid>
      <pubDate>Sat, 19 Oct 2019 07:52:57 GMT</pubDate>
      <description>
      
        &lt;p&gt;今天10.19号了，在10.15号的时候我就已经实习了整整三个月了，三个月的时间过得还挺快。&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>今天10.19号了，在10.15号的时候我就已经实习了整整三个月了，三个月的时间过得还挺快。<a id="more"></a><br>虽然每天有四个小时的车程，早晨六点二十就得起床，但是这些对于我来说都不算什么，因为我已经习惯了。<br>刚开始的时候，真的会觉得坐车很累，后来慢慢地给自己找了一些事做，比如：看剧啊，听歌啊，学习啊，发呆啊，我甚至很享受这个过程。有时，坐在公交车上发呆的时候甚至到站了不想下车。<br>公司福利也不错啊，还会一起聚餐，虽然这显然是为了广大的男同事们，但能蹭吃蹭喝还不错啊。<br>还会一起看电影，就连可乐和爆米花都已经为我们准备好了，虽然我没有去啊。<br>和同事相处得好像也挺不错，可能因为大多是异性，大概男生天生会比女生的心大一些，所以自然也会好相处一些。<br>有时，我们也会加班，开始我很烦，其实也不是那么烦。因为一般加班的话，我们就会去五楼和他们坐在一起加班。平时我们在六楼，很少能见到，加班仿佛还能增加和他们聊天的机会。呃呃呃，好吧，其实我说的是组长啦。<br>其实组长真的是一个好人啊。他好像每天都很忙，几乎每天都在加班，但是好像每天都精力充沛。<br>我们总是一起说说笑笑，我开始不理解他，因为他老是不回消息，但后来才知道他好像真的为我做了很多。比如知道我急着回家，会急忙从一楼跑上六楼来给我解决问题，即便是累得气喘吁吁。<br>我走路的时候，他会叫我不要玩手机。<br>他好像也不抽烟。<br>他每周都会回家陪父母，比如，现在还在陪妈妈逛街。<br>组长真的是一个很好的人啊。<br>我还以为他喜欢我呢，虽然大家好像都那么暗示我，结果我也不确定啊。<br>要去确定这件事真的太南啦！<br>虽然这里千好万好，但是好像真的学不到什么东西。从开始实习到现在，就写过一次代码。就连在公司学习也是偷偷摸摸的(因为自己太菜，不好意思啊)。有时我甚至在怀疑自己能不能做好这件事，还要不要继续做这件事，当然我现在也没有答案。<br>我又开始看招聘，想要辞职重新找一份工作，又怕找不到，而且我真的很舍不得离开公(组)司(长)。呜呜呜~我要怎么办嘛，好纠结啊！</p>]]></content:encoded>
      
      <comments>http://yoursite.com/2019/10/19/44_%E5%B0%8F%E8%88%92%E7%9A%84%E7%BA%A0%E7%BB%93/#disqus_thread</comments>
    </item>
    
  </channel>
</rss>

<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Awake&#39;s Blog</title>
    <link>http://yoursite.com/</link>
    <atom:link href="/rss2.xml" rel="self" type="application/rss+xml"/>
    
    <description></description>
    <pubDate>Sun, 27 Oct 2019 08:47:12 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title>时间转化</title>
      <link>http://yoursite.com/2019/10/27/43_%E6%97%B6%E9%97%B4%E8%BD%AC%E5%8C%96/</link>
      <guid>http://yoursite.com/2019/10/27/43_%E6%97%B6%E9%97%B4%E8%BD%AC%E5%8C%96/</guid>
      <pubDate>Sun, 27 Oct 2019 08:03:27 GMT</pubDate>
      <description>
      
        &lt;p&gt;上周，公司居然又叫我们上手写代码了。但是那个网站有好多时间规则，我也搞不清楚，百度了好久才找到答案，最后发现自己真的是太辣鸡了。所以，也不用纠结是走还是留了，还是留在公司好好学习吧。坚定一个方向——爬虫，能把这个搞好都不错了，这么说来，Django好像也是白学了这么久呢，还不如好好学爬虫呢。&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>上周，公司居然又叫我们上手写代码了。但是那个网站有好多时间规则，我也搞不清楚，百度了好久才找到答案，最后发现自己真的是太辣鸡了。所以，也不用纠结是走还是留了，还是留在公司好好学习吧。坚定一个方向——爬虫，能把这个搞好都不错了，这么说来，Django好像也是白学了这么久呢，还不如好好学爬虫呢。<a id="more"></a><br>那个网站的时间是这样的：25分钟，5小时前，3天前，2周前，1个月前，1年前…<br>一开始我使用的是time模块，是这样去匹配的：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">conv_time1</span><span class="params">(t)</span>:</span></span><br><span class="line">    d = re.findall(<span class="string">'\d+'</span>, t)[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">if</span> <span class="string">u'分钟'</span> <span class="keyword">in</span> t:</span><br><span class="line">        c = time.time() - int(d) * <span class="number">60</span></span><br><span class="line">    <span class="keyword">elif</span> <span class="string">u'小时'</span> <span class="keyword">in</span> t:</span><br><span class="line">        c = time.time() - int(d)*<span class="number">60</span>*<span class="number">60</span></span><br><span class="line">    <span class="keyword">elif</span> <span class="string">u'天'</span> <span class="keyword">in</span> t:</span><br><span class="line">        c = time.time() - int(d)*<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span></span><br><span class="line">    <span class="keyword">elif</span> <span class="string">u'周'</span> <span class="keyword">in</span> t:</span><br><span class="line">        c = time.time() - int(d)*<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>*<span class="number">7</span></span><br><span class="line">    c = time.strftime(<span class="string">'%Y-%m-%d %H:%M:%S'</span>, time.localtime(c))</span><br><span class="line">    <span class="keyword">return</span> c</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(<span class="string">'当前时间为：'</span>,datetime.now())</span><br><span class="line">r1 = conv_time1(<span class="string">'25分钟前'</span>)</span><br><span class="line">r2 = conv_time1(<span class="string">'5小时前'</span>)</span><br><span class="line">r3 = conv_time1(<span class="string">'3天前'</span>)</span><br><span class="line">r4 = conv_time1(<span class="string">'2周前'</span>)</span><br><span class="line">print(<span class="string">'25分钟前：'</span>, r1)</span><br><span class="line">print(<span class="string">'5小时前：'</span>, r2)</span><br><span class="line">print(<span class="string">'3天前：'</span>, r3)</span><br><span class="line">print(<span class="string">'2周前：'</span>, r4)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出如下：</span></span><br><span class="line">当前时间为： <span class="number">2019</span><span class="number">-10</span><span class="number">-27</span> <span class="number">16</span>:<span class="number">21</span>:<span class="number">55.296976</span></span><br><span class="line"><span class="number">25</span>分钟前： <span class="number">2019</span><span class="number">-10</span><span class="number">-27</span> <span class="number">15</span>:<span class="number">56</span>:<span class="number">55</span></span><br><span class="line"><span class="number">5</span>小时前： <span class="number">2019</span><span class="number">-10</span><span class="number">-27</span> <span class="number">11</span>:<span class="number">21</span>:<span class="number">55</span></span><br><span class="line"><span class="number">3</span>天前： <span class="number">2019</span><span class="number">-10</span><span class="number">-24</span> <span class="number">16</span>:<span class="number">21</span>:<span class="number">55</span></span><br><span class="line"><span class="number">2</span>周前： <span class="number">2019</span><span class="number">-10</span><span class="number">-13</span> <span class="number">16</span>:<span class="number">21</span>:<span class="number">55</span></span><br></pre></td></tr></table></figure></p><p>这样做还是没有问题的，可是当时间变成了1个月前，那到底一个月是30天还是31天呢，这样输出的时间就有问题<br>后来又遇到了datetime模块，又将代码变成了如下：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">conv_time2</span><span class="params">(t)</span>:</span></span><br><span class="line">    d = int(re.findall(<span class="string">'\d+'</span>, t)[<span class="number">0</span>])</span><br><span class="line">    <span class="keyword">if</span> <span class="string">u'分钟'</span> <span class="keyword">in</span> t:</span><br><span class="line">        s = datetime.now() - timedelta(minutes=d)</span><br><span class="line">    <span class="keyword">elif</span> <span class="string">u'小时'</span> <span class="keyword">in</span> t:</span><br><span class="line">        s = datetime.now() - timedelta(hours=d)</span><br><span class="line">    <span class="keyword">elif</span> <span class="string">u'天'</span> <span class="keyword">in</span> t:</span><br><span class="line">        s = datetime.now() - timedelta(days=d)</span><br><span class="line">    <span class="keyword">elif</span> <span class="string">u'周'</span> <span class="keyword">in</span> t:</span><br><span class="line">        s = datetime.now() - timedelta(days=d*<span class="number">7</span>)</span><br><span class="line">    <span class="keyword">elif</span> <span class="string">u'月'</span> <span class="keyword">in</span> t:</span><br><span class="line">        s = datetime.now() - timedelta(days=d*<span class="number">30</span>)</span><br><span class="line">    <span class="keyword">elif</span> <span class="string">u'年'</span> <span class="keyword">in</span> t:</span><br><span class="line">        s = datetime.now() - timedelta(days=d*<span class="number">365</span>)</span><br><span class="line">    <span class="keyword">return</span> s.strftime(<span class="string">'%Y-%m-%d %H:%M:%S'</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">'当前时间为：'</span>,datetime.now())</span><br><span class="line">r1 = conv_time2(<span class="string">'25分钟前'</span>)</span><br><span class="line">r2 = conv_time2(<span class="string">'5小时前'</span>)</span><br><span class="line">r3 = conv_time2(<span class="string">'3天前'</span>)</span><br><span class="line">r4 = conv_time2(<span class="string">'2周前'</span>)</span><br><span class="line">r5 = conv_time2(<span class="string">'1个月前'</span>)</span><br><span class="line">r6 = conv_time2(<span class="string">'1年前'</span>)</span><br><span class="line">print(<span class="string">'25分钟前：'</span>, r1)</span><br><span class="line">print(<span class="string">'5小时前：'</span>, r2)</span><br><span class="line">print(<span class="string">'3天前：'</span>, r3)</span><br><span class="line">print(<span class="string">'2周前：'</span>, r4)</span><br><span class="line">print(<span class="string">'1个月前：'</span>, r5)</span><br><span class="line">print(<span class="string">'1年前：'</span>, r6)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 輸出如下</span></span><br><span class="line">当前时间为： <span class="number">2019</span><span class="number">-10</span><span class="number">-27</span> <span class="number">16</span>:<span class="number">30</span>:<span class="number">01.563789</span></span><br><span class="line"><span class="number">25</span>分钟前： <span class="number">2019</span><span class="number">-10</span><span class="number">-27</span> <span class="number">16</span>:<span class="number">05</span>:<span class="number">01</span></span><br><span class="line"><span class="number">5</span>小时前： <span class="number">2019</span><span class="number">-10</span><span class="number">-27</span> <span class="number">11</span>:<span class="number">30</span>:<span class="number">01</span></span><br><span class="line"><span class="number">3</span>天前： <span class="number">2019</span><span class="number">-10</span><span class="number">-24</span> <span class="number">16</span>:<span class="number">30</span>:<span class="number">01</span></span><br><span class="line"><span class="number">2</span>周前： <span class="number">2019</span><span class="number">-10</span><span class="number">-13</span> <span class="number">16</span>:<span class="number">30</span>:<span class="number">01</span></span><br><span class="line"><span class="number">1</span>个月前： <span class="number">2019</span><span class="number">-09</span><span class="number">-27</span> <span class="number">16</span>:<span class="number">30</span>:<span class="number">01</span></span><br><span class="line"><span class="number">1</span>年前： <span class="number">2018</span><span class="number">-10</span><span class="number">-27</span> <span class="number">16</span>:<span class="number">30</span>:<span class="number">01</span></span><br></pre></td></tr></table></figure></p><p>但是当时间变成2个月前：输出就是这样了：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">'当前时间为：'</span>,datetime.now())</span><br><span class="line">r5 = conv_time2(<span class="string">'2个月前'</span>)</span><br><span class="line">print(<span class="string">'2个月前：'</span>, r5)</span><br><span class="line"><span class="number">2</span>个月前： <span class="number">2019</span><span class="number">-08</span><span class="number">-28</span> <span class="number">16</span>:<span class="number">33</span>:<span class="number">37</span></span><br></pre></td></tr></table></figure><p>这明显是不符合要求的，后来在我呕心沥血，刨根问底之下，终于找到了一篇博客，下面就是完整的时间匹配啦：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> dateutil.relativedelta <span class="keyword">import</span> relativedelta</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">conv_time3</span><span class="params">(t)</span>:</span></span><br><span class="line">    d = int(re.findall(<span class="string">'\d+'</span>, t)[<span class="number">0</span>])</span><br><span class="line">    <span class="keyword">if</span> <span class="string">u'分钟'</span> <span class="keyword">in</span> t:</span><br><span class="line">        s = datetime.now() - relativedelta(minutes=d)</span><br><span class="line">    <span class="keyword">elif</span> <span class="string">u'小时'</span> <span class="keyword">in</span> t:</span><br><span class="line">        s = datetime.now() - relativedelta(hours=d)</span><br><span class="line">    <span class="keyword">elif</span> <span class="string">u'天'</span> <span class="keyword">in</span> t:</span><br><span class="line">        s = datetime.now() - relativedelta(days=d)</span><br><span class="line">    <span class="keyword">elif</span> <span class="string">u'周'</span> <span class="keyword">in</span> t:</span><br><span class="line">        s = datetime.now() - relativedelta(weeks=d)</span><br><span class="line">    <span class="keyword">elif</span> <span class="string">u'月'</span> <span class="keyword">in</span> t:</span><br><span class="line">        s = datetime.now() - relativedelta(months=d)</span><br><span class="line">    <span class="keyword">elif</span> <span class="string">u'年'</span> <span class="keyword">in</span> t:</span><br><span class="line">        s = datetime.now() - relativedelta(years=d)</span><br><span class="line">    <span class="keyword">return</span> s.strftime(<span class="string">'%Y-%m-%d %H:%M:%S'</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">'当前时间为：'</span>,datetime.now())</span><br><span class="line">r1 = conv_time3(<span class="string">'25分钟前'</span>)</span><br><span class="line">r2 = conv_time3(<span class="string">'5小时前'</span>)</span><br><span class="line">r3 = conv_time3(<span class="string">'3天前'</span>)</span><br><span class="line">r4 = conv_time3(<span class="string">'2周前'</span>)</span><br><span class="line">r5 = conv_time3(<span class="string">'2个月前'</span>)</span><br><span class="line">r6 = conv_time3(<span class="string">'3年前'</span>)</span><br><span class="line">print(<span class="string">'25分钟前：'</span>, r1)</span><br><span class="line">print(<span class="string">'5小时前：'</span>, r2)</span><br><span class="line">print(<span class="string">'3天前：'</span>, r3)</span><br><span class="line">print(<span class="string">'2周前：'</span>, r4)</span><br><span class="line">print(<span class="string">'2个月前：'</span>, r5)</span><br><span class="line">print(<span class="string">'2年前：'</span>, r6)</span><br><span class="line"></span><br><span class="line">当前时间为： <span class="number">2019</span><span class="number">-10</span><span class="number">-27</span> <span class="number">16</span>:<span class="number">39</span>:<span class="number">52.254574</span></span><br><span class="line"><span class="number">25</span>分钟前： <span class="number">2019</span><span class="number">-10</span><span class="number">-27</span> <span class="number">16</span>:<span class="number">14</span>:<span class="number">52</span></span><br><span class="line"><span class="number">5</span>小时前： <span class="number">2019</span><span class="number">-10</span><span class="number">-27</span> <span class="number">11</span>:<span class="number">39</span>:<span class="number">52</span></span><br><span class="line"><span class="number">3</span>天前： <span class="number">2019</span><span class="number">-10</span><span class="number">-24</span> <span class="number">16</span>:<span class="number">39</span>:<span class="number">52</span></span><br><span class="line"><span class="number">2</span>周前： <span class="number">2019</span><span class="number">-10</span><span class="number">-13</span> <span class="number">16</span>:<span class="number">39</span>:<span class="number">52</span></span><br><span class="line"><span class="number">2</span>个月前： <span class="number">2019</span><span class="number">-08</span><span class="number">-27</span> <span class="number">16</span>:<span class="number">39</span>:<span class="number">52</span></span><br><span class="line"><span class="number">2</span>年前： <span class="number">2016</span><span class="number">-10</span><span class="number">-27</span> <span class="number">16</span>:<span class="number">39</span>:<span class="number">52</span></span><br></pre></td></tr></table></figure></p><p>这下输出就是完全正确的了<br>然后，我还看到了有更惊为天人的写法<br>如果要计算5个月前的时间</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">a = datetime.now()</span><br><span class="line">print(<span class="string">'当前时间为：'</span>, a)</span><br><span class="line">m = datetime(a.year,a.month<span class="number">-5</span>,a.day,a.hour,a.minute,a.second,a.microsecond).strftime(<span class="string">'%Y-%m-%d %H:%M:%S'</span>)</span><br><span class="line">print(<span class="string">'5个月前：'</span> , m)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">当前时间为： <span class="number">2019</span><span class="number">-10</span><span class="number">-27</span> <span class="number">16</span>:<span class="number">44</span>:<span class="number">02.818906</span></span><br><span class="line"><span class="number">5</span>个月前： <span class="number">2019</span><span class="number">-05</span><span class="number">-27</span> <span class="number">16</span>:<span class="number">44</span>:<span class="number">02</span></span><br></pre></td></tr></table></figure><p>跪了跪了，真的太厉害了，看来，我还真的只是个辣鸡弟弟啊<br>接下来的任务就是先好好学学datetime模块的相关用法吧，我太弱了</p>]]></content:encoded>
      
      <comments>http://yoursite.com/2019/10/27/43_%E6%97%B6%E9%97%B4%E8%BD%AC%E5%8C%96/#disqus_thread</comments>
    </item>
    
    <item>
      <title>小舒的纠结</title>
      <link>http://yoursite.com/2019/10/19/43_%E5%B0%8F%E8%88%92%E7%9A%84%E7%BA%A0%E7%BB%93/</link>
      <guid>http://yoursite.com/2019/10/19/43_%E5%B0%8F%E8%88%92%E7%9A%84%E7%BA%A0%E7%BB%93/</guid>
      <pubDate>Sat, 19 Oct 2019 07:52:57 GMT</pubDate>
      <description>
      
        &lt;p&gt;今天10.19号了，在10.15号的时候我就已经实习了整整三个月了，三个月的时间过得还挺快。&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>今天10.19号了，在10.15号的时候我就已经实习了整整三个月了，三个月的时间过得还挺快。<a id="more"></a><br>虽然每天有四个小时的车程，早晨六点二十就得起床，但是这些对于我来说都不算什么，因为我已经习惯了。<br>刚开始的时候，真的会觉得坐车很累，后来慢慢地给自己找了一些事做，比如：看剧啊，听歌啊，学习啊，发呆啊，我甚至很享受这个过程。有时，坐在公交车上发呆的时候甚至到站了不想下车。<br>公司福利也不错啊，还会一起聚餐，虽然这显然是为了广大的男同事们，但能蹭吃蹭喝还不错啊。<br>还会一起看电影，就连可乐和爆米花都已经为我们准备好了，虽然我没有去啊。<br>和同事相处得好像也挺不错，可能因为大多是异性，大概男生天生会比女生的心大一些，所以自然也会好相处一些。<br>有时，我们也会加班，开始我很烦，其实也不是那么烦。因为一般加班的话，我们就会去五楼和他们坐在一起加班。平时我们在六楼，很少能见到，加班仿佛还能增加和他们聊天的机会。呃呃呃，好吧，其实我说的是组长啦。<br>其实组长真的是一个好人啊。他好像每天都很忙，几乎每天都在加班，但是好像每天都精力充沛。<br>我们总是一起说说笑笑，我开始不理解他，因为他老是不回消息，但后来才知道他好像真的为我做了很多。比如知道我急着回家，会急忙从一楼跑上六楼来给我解决问题，即便是累得气喘吁吁。<br>我走路的时候，他会叫我不要玩手机。<br>他好像也不抽烟。<br>他每周都会回家陪父母，比如，现在还在陪妈妈逛街。<br>组长真的是一个很好的人啊。<br>我还以为他喜欢我呢，虽然大家好像都那么暗示我，结果我也不确定啊。<br>要去确定这件事真的太南啦！<br>虽然这里千好万好，但是好像真的学不到什么东西。从开始实习到现在，就写过一次代码。就连在公司学习也是偷偷摸摸的(因为自己太菜，不好意思啊)。有时我甚至在怀疑自己能不能做好这件事，还要不要继续做这件事，当然我现在也没有答案。<br>我又开始看招聘，想要辞职重新找一份工作，又怕找不到，而且我真的很舍不得离开公(组)司(长)。呜呜呜~我要怎么办嘛，好纠结啊！</p>]]></content:encoded>
      
      <comments>http://yoursite.com/2019/10/19/43_%E5%B0%8F%E8%88%92%E7%9A%84%E7%BA%A0%E7%BB%93/#disqus_thread</comments>
    </item>
    
    <item>
      <title>Scrapyd的学习</title>
      <link>http://yoursite.com/2019/10/19/43_scrapyd/</link>
      <guid>http://yoursite.com/2019/10/19/43_scrapyd/</guid>
      <pubDate>Sat, 19 Oct 2019 07:28:14 GMT</pubDate>
      <description>
      
        &lt;p&gt;前段时间公司叫我们实习生写了一个爬虫，但是最后是由正式员工来部署的，感觉大家真的都好厉害啊。我这个小菜鸡很久都没有学习了，所以也来学习学习了。&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>前段时间公司叫我们实习生写了一个爬虫，但是最后是由正式员工来部署的，感觉大家真的都好厉害啊。我这个小菜鸡很久都没有学习了，所以也来学习学习了。<a id="more"></a><br>Scrapyd是用来部署和运行爬虫，看官方文档上对他的介绍</p><blockquote><p>Scrapyd is an application for deploying and running Scrapy spiders. It enables you to deploy (upload) your projects and control their spiders using a JSON API.</p></blockquote><p>安装</p><blockquote><p>pip install scrapyd<br>pip install scrapyd-client</p></blockquote><p>修改scrapy.cfg<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[deploy:demo]</span><br><span class="line">url = http://localhost:<span class="number">6800</span>/</span><br><span class="line">project = Myproject</span><br></pre></td></tr></table></figure></p><p>开启scrapyd服务</p><blockquote><p>scrapyd</p></blockquote><p>将项目部署到scrapyd</p><blockquote><p>scrapyd-deploy demo -p Myproject</p></blockquote><p>查看服务器的状态</p><blockquote><p>curl <a href="http://localhost:6800/daemonstatus.json" target="_blank" rel="noopener">http://localhost:6800/daemonstatus.json</a></p></blockquote><p>启动爬虫</p><blockquote><p>curl <a href="http://localhost:6800/schedule.json" target="_blank" rel="noopener">http://localhost:6800/schedule.json</a> -d project=projectName -d spider=spiderName</p></blockquote><p>列出所有项目</p><blockquote><p>curl <a href="http://localhost:6800/listprojects.json" target="_blank" rel="noopener">http://localhost:6800/listprojects.json</a></p></blockquote><p>列出项目的所有版本</p><blockquote><p>curl <a href="http://localhost:6800/listversions.json?project=projectName" target="_blank" rel="noopener">http://localhost:6800/listversions.json?project=projectName</a></p></blockquote><p>列出项目的所有爬虫</p><blockquote><p>curl <a href="http://localhost:6800/listspiders.json?project=projectName" target="_blank" rel="noopener">http://localhost:6800/listspiders.json?project=projectName</a></p></blockquote><p>删除项目的某一版本</p><blockquote><p>curl <a href="http://localhost:6800/delversion.json" target="_blank" rel="noopener">http://localhost:6800/delversion.json</a> -d project=projectName -d version=r99</p></blockquote><p>删除项目</p><blockquote><p>curl <a href="http://localhost:6800/delproject.json" target="_blank" rel="noopener">http://localhost:6800/delproject.json</a> -d project=projectName</p></blockquote><p>最后想说一下，我在部署的时候遇到的问题：</p><ol><li>安装，Windows上缺少scrapyd-deploy.bat文件，解决方法可参考<a href="https://www.jianshu.com/p/ddd28f8b47fb" target="_blank" rel="noopener">https://www.jianshu.com/p/ddd28f8b47fb</a></li><li>在scrapyd-deploy demo -p Myproject爬虫就已经运行起来了</li><li>在scrapyd的web端没有日志输出</li></ol><p>找了半天也没找到后面两个的解决方法，咋子办嘛</p>]]></content:encoded>
      
      <comments>http://yoursite.com/2019/10/19/43_scrapyd/#disqus_thread</comments>
    </item>
    
    <item>
      <title>若能避开猛烈的欢喜，自然不会有悲痛来袭</title>
      <link>http://yoursite.com/2019/10/14/42_%E8%8B%A5%E8%83%BD%E9%81%BF%E5%BC%80%E7%8C%9B%E7%83%88%E7%9A%84%E6%AC%A2%E5%96%9C/</link>
      <guid>http://yoursite.com/2019/10/14/42_%E8%8B%A5%E8%83%BD%E9%81%BF%E5%BC%80%E7%8C%9B%E7%83%88%E7%9A%84%E6%AC%A2%E5%96%9C/</guid>
      <pubDate>Mon, 14 Oct 2019 02:20:03 GMT</pubDate>
      <description>
      
        &lt;section data-role=&quot;outer&quot; label=&quot;Powered by 135editor.com&quot; style=&quot;font-size:16px;&quot;&gt;&lt;section class=&quot;article135&quot; style=&quot;box-sizing: border-box; padding: 0px 20px;&quot;&gt;&lt;p style=&quot;letter-spacing: 2px;&quot;&gt;&lt;span style=&quot;font-size: 14px; color: #595959;&quot;&gt;若能避开猛烈的欢喜，自然不会有悲痛来袭&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;
      
      </description>
      
      <content:encoded><![CDATA[<section data-role="outer" label="Powered by 135editor.com" style="font-size:16px;"><section class="article135" style="box-sizing: border-box; padding: 0px 20px;"><p style="letter-spacing: 2px;"><span style="font-size: 14px; color: #595959;">若能避开猛烈的欢喜，自然不会有悲痛来袭</span></p><a id="more"></a><p style="letter-spacing: 2px;"><span style="font-size: 14px; color: #595959;">偶然得到这么一句话，很是喜欢，若能避开猛烈的欢喜，自然不会有悲痛来袭</span></p><p style="letter-spacing: 2px;"><font color="#595959"><span style="font-size: 14px;">已经好久没有写过计划了，也好久没有认真写过日记了，也很久没有总结了。上半年来，我几乎每个月都会写总结，自从上班后，这件事也就渐渐地忘了。</span></font></p><p style="letter-spacing: 2px;"><font color="#595959"><span style="font-size: 14px;">这两天忽然反应过来，最近我不仅没有什么进步，反而越来越堕落了。我也好久没有看书了，看过的书还没有我的年龄多。</span></font></p><p style="letter-spacing: 2px;"><font color="#595959"><span style="font-size: 14px;">刷微博的时候看到一句话，你的痛苦大都来源于读书太少了。想到最近的不开心，忽然觉得很有道理。前段时间也是很不开心，但是我却用看剧来消磨时光。<br></span></font></p><p style="letter-spacing: 2px;"><font color="#595959"><span style="font-size: 14px;">虽然我很不喜欢高中班主任，可从他那里学到的印象最深的只有两个字：浮躁。后来，这两个字一直伴随着我，且无法消除。</span></font></p><p style="letter-spacing: 2px;"><font color="#595959"><span style="font-size: 14px;">我收到过的最好的夸奖就是：你是个好女生。我不知道他所说的好，和我理解的好是不是一个意思。我以为的是我还是像原来那样，总是谦虚、努力的。暂且认为就是我理解的那样吧。</span></font></p><p style="letter-spacing: 2px;"><font color="#595959"><span style="font-size: 14px;">我听到过的最美的告白是：因为你对人笑都是真的。虽然只有一个人告白，虽然从来就没有假的笑。</span></font></p><p style="letter-spacing: 2px;"><font color="#595959"><span style="font-size: 14px;">今天依旧是黑色星期一，坐在办公室里昏昏沉沉。</span></font></p><p style="letter-spacing: 2px;"><font color="#595959"><span style="font-size: 14px;">突然，就想振作起来了</span></font></p><p style="letter-spacing: 2px;"><font color="#595959"><span style="font-size: 14px;">1. 早睡：23点前躺下</span></font></p><p style="letter-spacing: 2px;"><font color="#595959"><span style="font-size: 14px;">2. 保持平静：切忌大喜大悲</span></font></p><p style="letter-spacing: 2px;"><font color="#595959"><span style="font-size: 14px;">3. 坚持看书：书能使人平静</span></font></p><p style="letter-spacing: 2px;"><font color="#595959"><span style="font-size: 14px;">4. 坚持学习：人一刻也不能停止学习</span></font></p><p style="letter-spacing: 2px;"><font color="#595959"><span style="font-size: 14px;">5. 管理好脸蛋和身材，提升审美</span></font></p><p style="letter-spacing: 2px;"><font color="#595959"><span style="font-size: 14px;">6. 继续写博客</span></font></p><p style="letter-spacing: 2px;"><font color="#595959"><span style="font-size: 14px;">东想西想，吃些不长；开开心心，没有脑筋；没心没肺，活着不累。<br>今天小舒也要努力芽！</span></font></p></section></section>]]></content:encoded>
      
      <comments>http://yoursite.com/2019/10/14/42_%E8%8B%A5%E8%83%BD%E9%81%BF%E5%BC%80%E7%8C%9B%E7%83%88%E7%9A%84%E6%AC%A2%E5%96%9C/#disqus_thread</comments>
    </item>
    
    <item>
      <title>pyppeteer</title>
      <link>http://yoursite.com/2019/09/03/41_pypetter/</link>
      <guid>http://yoursite.com/2019/09/03/41_pypetter/</guid>
      <pubDate>Tue, 03 Sep 2019 13:12:03 GMT</pubDate>
      <description>
      
        &lt;p&gt;今天发现了一个很厉害的东西，Puppeteer和pyppeteer&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>今天发现了一个很厉害的东西，Puppeteer和pyppeteer<a id="more"></a></p><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>puppeteer是Google基于Node.js开发的一个工具，有了它可以通过JavaScript来控制Chrome浏览器的一些操作。而pyppeteer是基于puppeteer对python版本功能的实现。有点像selenium进行自动化操作，具有以下功能：</p><ul><li>生成页面的截图和PDF。</li><li>抓取SPA(单页应用程序)并渲染页面</li><li>自动提交表单，UI测试，键盘输入等。</li><li>创建一个最新的自动化测试环境，使用最新的JavaScript和浏览器特性，在最新版本的Chrome中直接运行测试。</li><li>捕捉异常跟踪堆栈来帮助诊断性能问题。</li><li>测试Chrome扩展</li><li>其他：js注入、模拟操作、异步执行、伪装</li></ul><h2 id="安装："><a href="#安装：" class="headerlink" title="安装："></a>安装：</h2><ol><li>下载 Nodejs：<a href="https://nodejs.org/en/" target="_blank" rel="noopener">https://nodejs.org/en/</a>  node版本至少v6.4.0</li><li>安装 puppeteer： <code>npm i puppeteer</code></li><li>安装 chromium：<a href="https://npm.taobao.org/mirrors/chromium-browser-snapshots" target="_blank" rel="noopener">https://npm.taobao.org/mirrors/chromium-browser-snapshots</a></li><li>安装 pyppeteer：<code>pip install pyppeteer</code></li><li>测试是否安装好了：<br>建立一个tmp.js文件，将以下代码copy到文件中，执行<code>node tmp.js</code><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> puppeteer = <span class="built_in">require</span>(<span class="string">'puppeteer'</span>);</span><br><span class="line">(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line"><span class="keyword">const</span> browser = <span class="keyword">await</span> puppeteer.launch(&#123;<span class="attr">headless</span>:<span class="literal">false</span>&#125;);</span><br><span class="line"><span class="keyword">const</span> page = <span class="keyword">await</span> browser.newPage();</span><br><span class="line"><span class="keyword">await</span> page.goto(<span class="string">'https://example.com'</span>);</span><br><span class="line"><span class="keyword">await</span> page.screenshot(&#123;<span class="attr">path</span>: <span class="string">'example.png'</span>&#125;);</span><br><span class="line"><span class="keyword">await</span> browser.close();</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></li></ol><h2 id="官方示例-demo-py"><a href="#官方示例-demo-py" class="headerlink" title="官方示例 demo.py"></a>官方示例 demo.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">from</span> pyppeteer <span class="keyword">import</span> launch</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">browser = <span class="keyword">await</span> launch(&#123;<span class="string">'headless'</span>:<span class="literal">False</span>,</span><br><span class="line"><span class="string">'executablePath'</span>:<span class="string">'/MAC/Study/27.Puppeteer/node_modules/puppeteer/.local-chromium/mac-609904/chrome-mac/Chromium.app/Contents/MacOS/Chromium'</span>&#125;)</span><br><span class="line">page = <span class="keyword">await</span> browser.newPage()</span><br><span class="line"><span class="keyword">await</span> page.goto(<span class="string">'http://example.com'</span>)</span><br><span class="line"><span class="keyword">await</span> page.screenshot(&#123;<span class="string">'path'</span>:<span class="string">'example.png'</span>&#125;)</span><br><span class="line"><span class="keyword">await</span> browser.close()</span><br><span class="line">asyncio.get_event_loop().run_until_complete(main())</span><br></pre></td></tr></table></figure><h2 id="初步使用"><a href="#初步使用" class="headerlink" title="初步使用"></a>初步使用</h2><p>开始学习pyppeteer，我用它模拟登陆了豆瓣，代码如下：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">from</span> pyppeteer <span class="keyword">import</span> launch</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">browser = <span class="keyword">await</span> launch(&#123;</span><br><span class="line"><span class="string">'headless'</span>:<span class="literal">False</span>,</span><br><span class="line"><span class="string">'autoClose'</span>: <span class="literal">False</span>,     <span class="comment">#设置底部和右侧的空白区域</span></span><br><span class="line"><span class="string">'args'</span>: [<span class="string">'-no-sandbox'</span>, <span class="string">'-window-size=1366,850'</span>],</span><br><span class="line"><span class="string">'slowMo'</span>: <span class="number">5</span></span><br><span class="line">&#125;)</span><br><span class="line">page = <span class="keyword">await</span> browser.newPage()</span><br><span class="line"><span class="keyword">await</span> page.setViewport(&#123;<span class="string">'width'</span>: <span class="number">1366</span>, <span class="string">'height'</span>: <span class="number">768</span>&#125;)   <span class="comment">#设置窗口大小</span></span><br><span class="line"><span class="keyword">await</span> page.goto(<span class="string">'https://accounts.douban.com/passport/login'</span>)   <span class="comment">#请求url</span></span><br><span class="line"><span class="keyword">await</span> page.click(<span class="string">'.account-tab-account'</span>)   <span class="comment">#点击某元素</span></span><br><span class="line"><span class="keyword">await</span> page.type(<span class="string">'#username'</span>, <span class="string">'12345135112'</span>)   <span class="comment">#点击某元素并输入内容</span></span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line"><span class="keyword">await</span> page.type(<span class="string">'#password'</span>, <span class="string">'afq12143vr'</span>)</span><br><span class="line"><span class="keyword">await</span> page.click(<span class="string">'.account-form &gt; .account-form-field-submit '</span>)</span><br><span class="line"><span class="keyword">await</span> page.waitFor(<span class="number">3000</span>)   <span class="comment">#设置页面等待时间</span></span><br><span class="line"><span class="keyword">await</span> page.screenshot(&#123;<span class="string">'path'</span>:<span class="string">'example.png'</span>&#125;)   <span class="comment">#截屏</span></span><br><span class="line"><span class="comment"># await page.evaluate('window.scrollTo(0,document.body.scrollHeight)')   #拖动滚轮</span></span><br><span class="line"><span class="comment"># await page.pdf(path='./exm.pdf')</span></span><br><span class="line"><span class="comment"># await browser.close()</span></span><br><span class="line"></span><br><span class="line">asyncio.get_event_loop().run_until_complete(main())</span><br></pre></td></tr></table></figure></p><ul><li>newPage()：生成一个新的对象，相当于再打开一个标签页</li><li>setViewport()：设置窗口大小，传入一个字典</li><li>goto()：请求url</li><li>click()：点击某个元素</li><li>type()：找到某个元素，并输入文本，接收选择器和传入的文本</li><li>waitFor()：设置页面等待时间</li><li>screenshot()：截屏</li><li>evaluate()：注入js代码</li><li>pdf()：将页面内容保存为pdf格式</li><li>close()：关闭浏览器</li></ul><p>今天就简单地了解了一下pyppeteer，明天继续学习啊！加油加油，争取月薪过万<br>今天小舒也要十分努力芽~</p>]]></content:encoded>
      
      <comments>http://yoursite.com/2019/09/03/41_pypetter/#disqus_thread</comments>
    </item>
    
  </channel>
</rss>
